<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Dialog
        id="ChangeRequestDialog"
        title="Change Request"
        draggable="true"
        resizable="true"
    >
        <VBox class="sapUiSmallMargin">
            <!-- Number -->
            <Label
                text="TaskNumber"
                required="true"
            />
            <Input
                id="crNumber"
                editable="{= ${ChangeRequestModel>/isEditable} }"
                value="{ChangeRequestModel>/number}"
            />

            <!-- Change Request -->
            <Label
                text="Change Request"
                required="true"
            />
            <Input
                id="crChangeRequest"
                value="{ChangeRequestModel>/changeRequest}"
            />

            <!-- Type -->
            <Label
                text="Type"
                required="true"
            />
            <Select
                id="crType"
                selectedKey="{ChangeRequestModel>/type}"
                width="100%"
            >
                <core:Item
                    key=""
                    text="-- Select Type --"
                />
                <core:Item
                    key="Planning"
                    text="Planning"
                />
                <core:Item
                    key="Implementation"
                    text="Implementation"
                />
                <core:Item
                    key="Testing"
                    text="Testing"
                />
                <core:Item
                    key="Review"
                    text="Review"
                />
            </Select>

            <!-- Status (Hardcoded) -->
            <Label
                text="Status"
                required="true"
            />
            <Select
                id="crStatus"
                selectedKey="{ChangeRequestModel>/status}"
                width="100%"
            >
                <core:Item
                    key=""
                    text="-- Select Status --"
                />
                <core:Item
                    key="Pending"
                    text="Pending"
                />
                <core:Item
                    key="Open"
                    text="Open"
                />
                <core:Item
                    key="InProgress"
                    text="InProgress"
                />
                <core:Item
                    key="Closed"
                    text="Closed"
                />
                <core:Item
                    key="Canceled"
                    text="Canceled"
                />
                <core:Item
                    key="Ready for retest"
                    text="Ready for retest"
                />
                <core:Item
                    key="Resloved"
                    text="Resloved"
                />
            </Select>
            <Label
                text="Analyst"
                required="true"
            />
            <HBox>
                <ComboBox
                    id="crBA"
                    width="100%"
                    selectedKey="{ChangeRequestModel>/BA}"
                    items="{AnalystModel>/}"
                    placeholder="Select Developer"
                >
                    <layoutData>
                        <FlexItemData growFactor="1" />
                    </layoutData>
                    <items>
                        <core:Item
                            key="{AnalystModel>name}"
                            text="{AnalystModel>name}"
                        />
                    </items>
                </ComboBox>

                <Button
                    icon="sap-icon://add"
                    type="Transparent"
                    tooltip="Add new Analyst"
                    press=".onAddNewEmployee('A')"
                />
            </HBox>

            <!-- Assigned To (Input instead of dropdown) -->
            <Label
                text="Developer"
                required="true"
            />

            <HBox>
                <ComboBox
                    id="crAssignedTo"
                    width="100%"
                    selectedKey="{ChangeRequestModel>/assignedTo}"
                    items="{DeveloperModel>/}"
                    placeholder="Select Developer"
                >
                    <layoutData>
                        <FlexItemData growFactor="1" />
                    </layoutData>
                    <items>
                        <core:Item
                            key="{DeveloperModel>name}"
                            text="{DeveloperModel>name}"
                        />
                    </items>
                </ComboBox>

                <!-- Small “+” icon for adding a new developer -->
                <Button
                    icon="sap-icon://add"
                    type="Transparent"
                    tooltip="Add new developer"
                    press=".onAddNewEmployee('D')"
                />
            </HBox>

            <!-- Description -->
            <Label
                text="Description"
                required="true"
            />
            <TextArea
                id="crDescription"
                value="{ChangeRequestModel>/description}"
                rows="1"
                width="100%"
            />
            <Label text="Created Date" />
            <!-- <DatePicker
                id="crCreateDate"
                value="{ChangeRequestModel>/createDate}"
                displayFormat="yyyy-MM-dd"
                valueFormat="yyyy-MM-dd"
            /> -->
            <DateTimePicker
                id="crCreateDate"
                value="{ChangeRequestModel>/createDate}"
                displayFormat="yyyy-MM-dd HH:mm:ss"
                valueFormat="yyyy-MM-dd'T'HH:mm:ss"
                placeholder="Select date and time"
            />

            <!-- On Hold (Radio Buttons) -->
            <CheckBox
                id="crOnHold"
                text="On Hold"
                selected="{ChangeRequestModel>/onHoldcheck}"
            />

            <!-- Vistex Check (Horizontal Radio Buttons) -->
            <Label text="Vistex Check" />
            <RadioButtonGroup
                id="crVistex"
                selectedIndex="{ChangeRequestModel>/vistexcheck}"
                columns="2"
            >
                <buttons>
                    <RadioButton text="Yes" />
                    <RadioButton text="No" />
                </buttons>
            </RadioButtonGroup>
            <Label text="Comments" />
            <TextArea
                id="crComments"
                value="{ChangeRequestModel>/comment}"
                rows="2"
                width="100%"
            />
        </VBox>

        <beginButton>
            <Button
                text="Save"
                press="onCreateupdatePress"
            />
        </beginButton>
        <endButton>
            <Button
                text="Cancel"
                press="onCancelPress"
            />
        </endButton>
    </Dialog>
</core:FragmentDefinition>
